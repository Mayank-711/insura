<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsuraCare - Smart Insurance Advisor</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #166088;
            --accent: #4fc3f7;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent);
        }

        .hero {
            text-align: center;
            padding: 4rem 0;
            background: url('https://images.unsplash.com/photo-1450101499163-c8848c66ca85?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
            color: white;
            position: relative;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .btn {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn:hover {
            background: #3ba1d1;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 3rem 0;
        }

        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            display: none;
            flex-direction: column;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .chatbot-header h3 i {
            margin-right: 10px;
        }

        .chatbot-header button {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .chatbot-body {
            height: 400px;
            padding: 15px;
            overflow-y: auto;
            background: #f9f9f9;
        }

        .message {
            margin-bottom: 15px;
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            background: white;
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .user-message {
            background: var(--primary);
            color: white;
            align-self: flex-end;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .chatbot-footer {
            display: flex;
            padding: 15px;
            background: white;
            border-top: 1px solid #eee;
        }

        .chatbot-footer input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 30px;
            outline: none;
            font-size: 0.95rem;
        }

        .chatbot-footer button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            margin-left: 10px;
            border-radius: 30px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .chatbot-footer button:hover {
            background: var(--secondary);
        }

        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .quick-reply {
            background: white;
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 6px 12px;
            margin: 5px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .quick-reply:hover {
            background: var(--primary);
            color: white;
        }

        .typing-indicator {
            display: inline-block;
            padding: 10px 15px;
            background: white;
            border-radius: 18px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .chatbot-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 999;
            transition: all 0.3s ease;
        }

        .chatbot-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .chatbot-btn i {
            font-size: 1.5rem;
        }

        footer {
            background: var(--dark);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .chatbot-container {
                width: 90%;
                right: 5%;
                bottom: 10px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <span>InsuraCare</span>
            </div>
            <nav>
                <a href="#" class="btn">Get Started</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <div class="hero-content">
                <h1>Smart Insurance Solutions Tailored For You</h1>
                <p>Our AI-powered advisor helps you find the perfect insurance coverage based on your unique needs and financial situation</p>
                <a href="#" class="btn" id="startChatBtn"><i class="fas fa-comments"></i> Chat with Advisor</a>
            </div>
        </section>

        <section class="features">
            <div class="feature-card">
                <i class="fas fa-user-shield"></i>
                <h3>Personalized Plans</h3>
                <p>Get insurance recommendations tailored specifically to your age, income, and family situation.</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-chart-line"></i>
                <h3>Smart Comparisons</h3>
                <p>Compare different insurance products side-by-side to make informed decisions.</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-hand-holding-usd"></i>
                <h3>Save Money</h3>
                <p>Discover the most cost-effective options without compromising on coverage.</p>
            </div>
        </section>
    </main>

    <!-- Chatbot Button -->
    <div class="chatbot-btn" id="chatbotBtn">
        <i class="fas fa-robot"></i>
    </div>

    <!-- Chatbot Container -->
    <div class="chatbot-container" id="chatbot">
        <div class="chatbot-header">
            <h3><i class="fas fa-robot"></i> InsuraBot</h3>
            <button id="closeChatbot"><i class="fas fa-times"></i></button>
        </div>
        <div class="chatbot-body" id="chatBody">
            <!-- Messages will appear here -->
        </div>
        <div class="chatbot-footer">
            <input type="text" id="userInput" placeholder="Type your message...">
            <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 InsuraCare. All rights reserved.</p>
        </div>
    </footer>

    
        // Detect general insurance questions
        function isGeneralQuestion(message) {
            const generalKeywords = [
                'what is', 'explain', 'how does', 'tell me about', 
                'difference between', 'meaning of', 'bank', 'policy',
                'claim', 'premium', 'coverage', 'insurance'
            ];
            return generalKeywords.some(keyword => 
                message.toLowerCase().includes(keyword)) && 
                chatState.currentLevel > 1;
        }

        // Ask general insurance question to Gemini
        async function askGeneralQuestion(question) {
            const prompt = `Act as an insurance expert. Explain this in simple terms with an analogy: ${question}
            Provide a 2-3 sentence answer suitable for a customer, then after "TECHNICAL:" give a more detailed explanation.`;
            
            // In production, call your backend which calls Gemini API
            // For demo, we'll simulate a response
            return simulateGeminiResponse(prompt);
        }

        // Process conversation level
        async function processLevel(message) {
            switch(chatState.currentLevel) {
                case 1: await processLevel1(message); break;
                case 2: await processLevel2(message); break;
                case 3: await processLevel3(message); break;
                case 4: await processLevel4(message); break;
                case 5: await processLevel5(message); break;
            }
        }

        // Level 1: Profile collection
        async function processLevel1(message) {
            const prompt = `Extract insurance profile details from: "${message}"
            Return JSON with: age, occupation, income, maritalStatus, dependents.
            Example: {"age":28,"occupation":"IT","income":"15LPA","maritalStatus":"single","dependents":false}`;
            
            const response = await simulateGeminiResponse(prompt);
            
            try {
                const profile = JSON.parse(response);
                chatState.profile = profile;
                chatState.currentLevel = 2;
                
                addBotMessage(`Thanks! Now, what are your financial priorities?
                \n1. Health cover\n2. Tax saving\n3. Wealth creation\n4. Child education\n5. Retirement`);
            } catch (e) {
                addBotMessage("Let me confirm: You're " + 
                    (profile.age ? `${profile.age} years old, ` : "") +
                    (profile.occupation ? `a ${profile.occupation}, ` : "") +
                    (profile.income ? `earning ${profile.income}` : "") + 
                    "\n\nIs this correct? (Please clarify any incorrect info)");
            }
        }

        // Level 2: Financial goals
        async function processLevel2(message) {
            const prompt = `Extract financial goals from: "${message}"
            Return JSON array like ["health", "tax"]. Possible goals: health, tax, wealth, child, retirement.`;
            
            const goals = await simulateGeminiResponse(prompt);
            
            try {
                chatState.profile.goals = JSON.parse(goals);
                chatState.currentLevel = 3;
                addBotMessage("How comfortable are you with investment risks?\n1. Low (safe)\n2. Medium (balanced)\n3. High (growth)");
            } catch (e) {
                chatState.profile.goals = ["health", "tax"];
                addBotMessage("I'll assume health and tax saving are priorities. How about investment risk? (low/medium/high)");
            }
        }

        // Level 3: Risk appetite
        async function processLevel3(message) {
            const prompt = `Classify risk appetite from: "${message}" as "low", "medium", or "high".`;
            
            chatState.profile.riskAppetite = (await simulateGeminiResponse(prompt)).toLowerCase();
            chatState.currentLevel = 4;
            
            // Generate recommendations
            const recPrompt = `Recommend insurance for profile: ${JSON.stringify(chatState.profile)}
            Suggest 1-3 products from: term life, health, ULIP, endowment, child, retirement.
            For each, include:\n- Why it fits\n- Example premium\nFormat as bullet points.`;
            
            const recommendations = await simulateGeminiResponse(recPrompt);
            addBotMessage(`Based on your profile:\n\n${recommendations}\n\nWhat would you like to do next?`);
        }

        // Level 4: Recommendations
        async function processLevel4(message) {
            if (message.toLowerCase().includes('compare')) {
                const prompt = `Compare insurance products for: ${JSON.stringify(chatState.profile)}
                Create a table comparing 2-3 relevant products across:
                Product, Premium, Coverage, Risk, Term. Use markdown format.`;
                
                const comparison = await simulateGeminiResponse(prompt);
                addBotMessage(comparison);
            } 
            else if (message.toLowerCase().includes('explain')) {
                const term = message.toLowerCase().includes('ulip') ? 'ULIP' : 
                            message.toLowerCase().includes('term') ? 'term insurance' : 
                            'insurance terms';
                const explanation = await askGeneralQuestion(`Explain ${term}`);
                addBotMessage(explanation);
            }
            else {
                addBotMessage("How else can I help? You can:\n- Compare plans\n- Get more details\n- Start over");
            }
        }

        // Level 5: Follow-ups
        async function processLevel5(message) {
            // Handle any follow-up questions
            const response = await askGeneralQuestion(message);
            addBotMessage(response);
        }

        // Simulate Gemini response (replace with actual API call)
        async function simulateGeminiResponse(prompt) {
            // In production, you would call:
            // const response = await fetch('/api/gemini', {
            //     method: 'POST',
            //     body: JSON.stringify({ prompt })
            // });
            // return response.json().answer;
            
            // Simulation for demo:
            const simulatedResponses = {
                "extract insurance profile": `{"age":28,"occupation":"IT","income":"15LPA","maritalStatus":"single","dependents":false}`,
                "extract financial goals": `["health","tax"]`,
                "classify risk appetite": "medium",
                "recommend insurance": `- **Term Life Insurance**: â‚¹1Cr cover @â‚¹12k/yr - Essential for your family's future\n- **Health Insurance**: â‚¹10L cover @â‚¹8k/yr - Covers medical emergencies\n- **ULIP**: Good for tax saving with growth potential`,
                "compare insurance products": `| Product | Premium | Coverage | Risk | Term |\n|---------|---------|----------|------|------|\n| Term Life | â‚¹12k/yr | â‚¹1Cr | None | 20y |\n| Health | â‚¹8k/yr | â‚¹10L | None | Annual |\n| ULIP | â‚¹50k/yr | Market-linked | High | 10y |`,
                "explain ULIP": "A ULIP combines insurance with investment - like a hybrid car ðŸš— with both safety and performance. TECHNICAL: Unit-Linked Insurance Plans invest premiums in funds while providing life cover.",
                "explain term insurance": "Term insurance is pure protection - like a safety net ðŸ›¡ï¸ for your family. TECHNICAL: Provides death benefit only, no maturity value, lowest cost for high coverage."
            };
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            for (const [key, value] of Object.entries(simulatedResponses)) {
                if (prompt.toLowerCase().includes(key)) return value;
            }
            return "Here's some information about that...";
        }

        // Event listeners
        document.getElementById('chatbotBtn').addEventListener('click', toggleChatbot);
        document.getElementById('closeChatbot').addEventListener('click', toggleChatbot);
        document.getElementById('sendMessage').addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>